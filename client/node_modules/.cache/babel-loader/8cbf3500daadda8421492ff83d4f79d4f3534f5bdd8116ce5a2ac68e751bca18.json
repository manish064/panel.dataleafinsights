{"ast":null,"code":"import React,{useState}from'react';import{Link,useNavigate}from'react-router-dom';import styled from'styled-components';import{FaEnvelope,FaArrowLeft}from'react-icons/fa';import{useAuth}from'../contexts/AuthContext';// Styled components\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ForgotPasswordContainer=styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: calc(100vh - 160px);\n  padding: 2rem;\n  background-color: #f8fafc;\n`;const ForgotPasswordCard=styled.div`\n  background: white;\n  border-radius: 10px;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\n  padding: 2rem;\n  width: 100%;\n  max-width: 500px;\n`;const ForgotPasswordHeader=styled.div`\n  text-align: center;\n  margin-bottom: 2rem;\n  \n  h1 {\n    color: #0fc179;\n    margin-bottom: 0.5rem;\n    font-size: 1.8rem;\n  }\n  \n  p {\n    color: #64748b;\n    font-size: 1rem;\n  }\n`;const Form=styled.form`\n  display: flex;\n  flex-direction: column;\n  gap: 1.5rem;\n`;const InputGroup=styled.div`\n  position: relative;\n  display: flex;\n  align-items: center;\n`;const InputIcon=styled.div`\n  position: absolute;\n  left: 1rem;\n  color: #64748b;\n`;const Input=styled.input`\n  width: 100%;\n  padding: 1rem 1rem 1rem 3rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 8px;\n  font-size: 1rem;\n  transition: border-color 0.3s;\n  \n  &:focus {\n    outline: none;\n    border-color: #0fc179;\n  }\n`;const SubmitButton=styled.button`\n  background: #0fc179;\n  color: white;\n  padding: 1rem;\n  border: none;\n  border-radius: 8px;\n  font-size: 1rem;\n  font-weight: bold;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  \n  &:hover {\n    background: #0fc179;\n    transform: translateY(-2px);\n  }\n  \n  &:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    transform: none;\n  }\n`;const BackToLogin=styled(Link)`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 0.5rem;\n  margin-top: 1.5rem;\n  color: #0fc179;\n  text-decoration: none;\n  font-size: 0.9rem;\n  \n  &:hover {\n    text-decoration: underline;\n  }\n`;const ErrorMessage=styled.div`\n  background-color: #fee2e2;\n  color: #b91c1c;\n  padding: 0.75rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;const SuccessMessage=styled.div`\n  background-color: #dcfce7;\n  color: #166534;\n  padding: 0.75rem;\n  border-radius: 8px;\n  margin-bottom: 1rem;\n  font-size: 0.9rem;\n`;const ForgotPassword=()=>{const navigate=useNavigate();const{forgotPassword}=useAuth();const[email,setEmail]=useState('');const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState('');const handleSubmit=async e=>{e.preventDefault();// Reset messages\nsetError('');setSuccess('');// Validate email\nif(!email){setError('Please enter your email address');return;}setLoading(true);try{const result=await forgotPassword(email);if(result.success){setSuccess('If an account with that email exists, a password reset OTP has been sent. Please check your email.');// Check if this might be a Google OAuth user by making a request to check user type\ntry{const checkResponse=await fetch('/api/auth/check-user-type',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({email})});const userData=await checkResponse.json();if(userData.isGoogleUser){// Navigate to set password page for Google users\nsetTimeout(()=>{navigate('/set-password',{state:{email}});},3000);}else{// Navigate to reset password page for regular users\nsetTimeout(()=>{navigate('/reset-password',{state:{email}});},3000);}}catch(checkError){// If check fails, default to reset password page\nsetTimeout(()=>{navigate('/reset-password',{state:{email}});},3000);}// Clear the form\nsetEmail('');}else{setError(result.message||'Failed to send password reset email');}}catch(error){setError('An error occurred. Please try again later.');console.error('Forgot password error:',error);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(ForgotPasswordContainer,{children:/*#__PURE__*/_jsxs(ForgotPasswordCard,{children:[/*#__PURE__*/_jsxs(ForgotPasswordHeader,{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Forgot Password\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Enter your email to receive a password reset code\"})]}),error&&/*#__PURE__*/_jsx(ErrorMessage,{children:error}),success&&/*#__PURE__*/_jsx(SuccessMessage,{children:success}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(InputGroup,{children:[/*#__PURE__*/_jsx(InputIcon,{children:/*#__PURE__*/_jsx(FaEnvelope,{})}),/*#__PURE__*/_jsx(Input,{type:\"email\",placeholder:\"Email Address\",value:email,onChange:e=>setEmail(e.target.value),required:true})]}),/*#__PURE__*/_jsx(SubmitButton,{type:\"submit\",disabled:loading,children:loading?'Sending...':'Send Reset Code'})]}),/*#__PURE__*/_jsxs(BackToLogin,{to:\"/login\",children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\" Back to Login\"]})]})});};export default ForgotPassword;","map":{"version":3,"names":["React","useState","Link","useNavigate","styled","FaEnvelope","FaArrowLeft","useAuth","jsx","_jsx","jsxs","_jsxs","ForgotPasswordContainer","div","ForgotPasswordCard","ForgotPasswordHeader","Form","form","InputGroup","InputIcon","Input","input","SubmitButton","button","BackToLogin","ErrorMessage","SuccessMessage","ForgotPassword","navigate","forgotPassword","email","setEmail","loading","setLoading","error","setError","success","setSuccess","handleSubmit","e","preventDefault","result","checkResponse","fetch","method","headers","body","JSON","stringify","userData","json","isGoogleUser","setTimeout","state","checkError","message","console","children","onSubmit","type","placeholder","value","onChange","target","required","disabled","to"],"sources":["C:/Users/hp/Desktop/ADMINCLIENTPANELDEMO/perfectclone/client/src/pages/ForgotPassword.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport { FaEnvelope, FaArrowLeft } from 'react-icons/fa';\r\nimport { useAuth } from '../contexts/AuthContext';\r\n\r\n// Styled components\r\nconst ForgotPasswordContainer = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  min-height: calc(100vh - 160px);\r\n  padding: 2rem;\r\n  background-color: #f8fafc;\r\n`;\r\n\r\nconst ForgotPasswordCard = styled.div`\r\n  background: white;\r\n  border-radius: 10px;\r\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);\r\n  padding: 2rem;\r\n  width: 100%;\r\n  max-width: 500px;\r\n`;\r\n\r\nconst ForgotPasswordHeader = styled.div`\r\n  text-align: center;\r\n  margin-bottom: 2rem;\r\n  \r\n  h1 {\r\n    color: #0fc179;\r\n    margin-bottom: 0.5rem;\r\n    font-size: 1.8rem;\r\n  }\r\n  \r\n  p {\r\n    color: #64748b;\r\n    font-size: 1rem;\r\n  }\r\n`;\r\n\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 1.5rem;\r\n`;\r\n\r\nconst InputGroup = styled.div`\r\n  position: relative;\r\n  display: flex;\r\n  align-items: center;\r\n`;\r\n\r\nconst InputIcon = styled.div`\r\n  position: absolute;\r\n  left: 1rem;\r\n  color: #64748b;\r\n`;\r\n\r\nconst Input = styled.input`\r\n  width: 100%;\r\n  padding: 1rem 1rem 1rem 3rem;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  transition: border-color 0.3s;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #0fc179;\r\n  }\r\n`;\r\n\r\nconst SubmitButton = styled.button`\r\n  background: #0fc179;\r\n  color: white;\r\n  padding: 1rem;\r\n  border: none;\r\n  border-radius: 8px;\r\n  font-size: 1rem;\r\n  font-weight: bold;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  \r\n  &:hover {\r\n    background: #0fc179;\r\n    transform: translateY(-2px);\r\n  }\r\n  \r\n  &:disabled {\r\n    opacity: 0.6;\r\n    cursor: not-allowed;\r\n    transform: none;\r\n  }\r\n`;\r\n\r\nconst BackToLogin = styled(Link)`\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  gap: 0.5rem;\r\n  margin-top: 1.5rem;\r\n  color: #0fc179;\r\n  text-decoration: none;\r\n  font-size: 0.9rem;\r\n  \r\n  &:hover {\r\n    text-decoration: underline;\r\n  }\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background-color: #fee2e2;\r\n  color: #b91c1c;\r\n  padding: 0.75rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  background-color: #dcfce7;\r\n  color: #166534;\r\n  padding: 0.75rem;\r\n  border-radius: 8px;\r\n  margin-bottom: 1rem;\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst ForgotPassword = () => {\r\n  const navigate = useNavigate();\r\n  const { forgotPassword } = useAuth();\r\n  const [email, setEmail] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    // Reset messages\r\n    setError('');\r\n    setSuccess('');\r\n    \r\n    // Validate email\r\n    if (!email) {\r\n      setError('Please enter your email address');\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    \r\n    try {\r\n      const result = await forgotPassword(email);\r\n      \r\n      if (result.success) {\r\n        setSuccess('If an account with that email exists, a password reset OTP has been sent. Please check your email.');\r\n        \r\n        // Check if this might be a Google OAuth user by making a request to check user type\r\n        try {\r\n          const checkResponse = await fetch('/api/auth/check-user-type', {\r\n            method: 'POST',\r\n            headers: {\r\n              'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ email })\r\n          });\r\n          \r\n          const userData = await checkResponse.json();\r\n          \r\n          if (userData.isGoogleUser) {\r\n            // Navigate to set password page for Google users\r\n            setTimeout(() => {\r\n              navigate('/set-password', { state: { email } });\r\n            }, 3000);\r\n          } else {\r\n            // Navigate to reset password page for regular users\r\n            setTimeout(() => {\r\n              navigate('/reset-password', { state: { email } });\r\n            }, 3000);\r\n          }\r\n        } catch (checkError) {\r\n          // If check fails, default to reset password page\r\n          setTimeout(() => {\r\n            navigate('/reset-password', { state: { email } });\r\n          }, 3000);\r\n        }\r\n        \r\n        // Clear the form\r\n        setEmail('');\r\n      } else {\r\n        setError(result.message || 'Failed to send password reset email');\r\n      }\r\n    } catch (error) {\r\n      setError('An error occurred. Please try again later.');\r\n      console.error('Forgot password error:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <ForgotPasswordContainer>\r\n      <ForgotPasswordCard>\r\n        <ForgotPasswordHeader>\r\n          <h1>Forgot Password</h1>\r\n          <p>Enter your email to receive a password reset code</p>\r\n        </ForgotPasswordHeader>\r\n        \r\n        {error && <ErrorMessage>{error}</ErrorMessage>}\r\n        {success && <SuccessMessage>{success}</SuccessMessage>}\r\n        \r\n        <Form onSubmit={handleSubmit}>\r\n          <InputGroup>\r\n            <InputIcon>\r\n              <FaEnvelope />\r\n            </InputIcon>\r\n            <Input\r\n              type=\"email\"\r\n              placeholder=\"Email Address\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              required\r\n            />\r\n          </InputGroup>\r\n          \r\n          <SubmitButton type=\"submit\" disabled={loading}>\r\n            {loading ? 'Sending...' : 'Send Reset Code'}\r\n          </SubmitButton>\r\n        </Form>\r\n        \r\n        <BackToLogin to=\"/login\">\r\n          <FaArrowLeft /> Back to Login\r\n        </BackToLogin>\r\n      </ForgotPasswordCard>\r\n    </ForgotPasswordContainer>\r\n  );\r\n};\r\n\r\nexport default ForgotPassword;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}