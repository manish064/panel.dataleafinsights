{"ast":null,"code":"import React,{useState,useEffect,useCallback}from'react';import{useParams,useNavigate}from'react-router-dom';import{FaArrowLeft,FaCheckCircle,FaExclamationTriangle}from'react-icons/fa';import{Clock,Users,DollarSign,ChevronLeft,ChevronRight}from'lucide-react';import{useAuth}from'../contexts/AuthContext';import axios from'axios';import styled from'styled-components';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SurveyContainer=styled.div`\n  max-width: 1000px; // Reduced from 1200px\n  margin: 0 auto;\n  padding: 0.25rem; // Reduced from 0.3rem\n  min-height: calc(100vh - 120px);\n`;const BackButton=styled.button`\n  background: none;\n  border: none;\n  color: #0fc179;\n  font-size: 0.55rem;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.25rem;\n  margin-bottom: 0.3rem;\n  padding: 0.25rem 0;\n  transition: color 0.3s ease;\n  \n  &:hover {\n    color: #0fc179;\n  }\n  \n  svg {\n    font-size: 0.55rem;\n    flex-shrink: 0;\n  }\n`;const NavButtons=styled.div`\n  display: flex;\n  justify-content: space-between;\n  margin-top: 0.5rem;\n  gap: 0.75rem;\n  \n  button {\n    padding: 0.4rem 0.8rem;\n    border: none;\n    border-radius: 6px;\n    font-weight: 600;\n    font-size: 0.85rem;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 0.5rem;\n    transition: all 0.3s ease;\n    \n    &:disabled {\n      opacity: 0.5;\n      cursor: not-allowed;\n    }\n    \n    &.previous {\n      background: white;\n      color: #0fc179;\n      border: 1px solid #e2e8f0;\n      \n      &:hover:not(:disabled) {\n        background: #f8fafc;\n        border-color: #0fc179;\n        transform: translateY(-1px);\n      }\n    }\n    \n    &.next {\n      background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\n      color: white;\n      \n      &:hover:not(:disabled) {\n        background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(15, 193, 121, 0.3);\n      }\n    }\n    \n    &.submit {\n      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);\n      color: white;\n      \n      &:hover:not(:disabled) {\n        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);\n        transform: translateY(-1px);\n        box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);\n      }\n    }\n    \n    svg {\n      font-size: 0.8rem;\n      flex-shrink: 0;\n    }\n  }\n`;const SurveyHeader=styled.div`\n  background: linear-gradient(to bottom, #0fc179 0%, #0fc179 100%);\n  color: white;\n  padding: 0.3rem; // Reduced from 0.4rem\n  border-radius: 2px;\n  margin-bottom: 0.6rem; // Reduced from 0.8rem\n  \n  h1 {\n    color: white;\n    margin: 0 0 0.25rem 0;\n    font-size: 0.9rem; // Reduced from 1rem\n  }\n  \n  p {\n    color: rgba(255, 255, 255, 0.9);\n    margin: 0;\n    opacity: 0.9;\n    font-size: 0.65rem; // Reduced from 0.7rem\n  }\n`;const SurveyMeta=styled.div`\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); // Reduced from 200px\n  gap: 0.4rem; // Reduced from 0.5rem\n  margin-bottom: 0.6rem; // Reduced from 0.8rem\n`;const MetaItem=styled.div`\n  background: white;\n  padding: 0.4rem; // Reduced from 0.5rem\n  border-radius: 3px;\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\n  display: flex;\n  align-items: center;\n  gap: 0.4rem; // Reduced from 0.5rem\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\n  border: 1px solid #e2e8f0;\n  \n  &:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 3px 10px rgba(15, 193, 121, 0.12);\n  }\n`;const ContentGrid=styled.div`\n  display: grid;\n  grid-template-columns: 1fr 240px; // Reduced from 280px\n  gap: 0.6rem; // Reduced from 0.75rem\n  \n  @media (max-width: 968px) {\n    grid-template-columns: 1fr;\n  }\n`;const Card=styled.div`\n  background: white;\n  border-radius: 5px; // Reduced from 6px\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\n  overflow: hidden;\n  border: 1px solid #e2e8f0;\n`;const CardHeader=styled.div`\n  padding: 0.6rem; // Reduced from 0.75rem\n  border-bottom: 1px solid #e0e0e0;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  \n  h2 {\n    margin: 0;\n    color: #2c3e50;\n    font-size: 0.7rem; // Reduced from 0.8rem\n  }\n`;const CardContent=styled.div`\n  padding: 0.6rem; // Reduced from 0.75rem\n  \n  .progress-track {\n    width: 100%;\n    height: 10px;\n    background: #f1f5f9;\n    border-radius: 6px;\n    overflow: hidden;\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);\n    \n    .progress-fill {\n      height: 100%;\n      background: linear-gradient(90deg, #0fc179 0%, #0fc179 50%, #0fc179 100%);\n      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\n      border-radius: 6px;\n      position: relative;\n      \n      &::after {\n        content: '';\n        position: absolute;\n        top: 0;\n        left: 0;\n        right: 0;\n        bottom: 0;\n        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);\n        animation: shimmer 2s infinite;\n      }\n    }\n  }\n  \n  @keyframes shimmer {\n    0% { transform: translateX(-100%); }\n    100% { transform: translateX(100%); }\n  }\n`;const QuestionCard=styled.div`\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\n  border: 1px solid #e2e8f0;\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n  animation: slideIn 0.4s ease-out;\n  \n  @keyframes slideIn {\n    from {\n      opacity: 0;\n      transform: translateY(20px);\n    }\n    to {\n      opacity: 1;\n      transform: translateY(0);\n    }\n  }\n  \n  &:hover {\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\n    transform: translateY(-1px);\n  }\n  \n  .question-header {\n    padding: 0.75rem;\n    border-bottom: 1px solid #e0e0e0;\n    background: #f8fafc;\n    \n    .question-number {\n      color: #0fc179;\n      font-weight: 600;\n      font-size: 0.8rem;\n      margin-bottom: 0.2rem;\n    }\n    \n    .question-text {\n      color: #2c3e50;\n      font-size: 1rem;\n      font-weight: 500;\n      margin: 0;\n      line-height: 1.4;\n    }\n    \n    .question-required {\n      color: #e74c3c;\n      font-size: 0.8rem;\n      margin-top: 0.5rem;\n    }\n  }\n  \n  .question-content {\n    padding: 0.75rem;\n  }\n`;const OptionsContainer=styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 0.4rem;\n`;const OptionLabel=styled.label`\n  display: flex;\n  align-items: center;\n  padding: 0.4rem;\n  border: 1px solid #e2e8f0;\n  border-radius: 6px;\n  cursor: pointer;\n  transition: all 0.3s ease;\n  background: white;\n  \n  &:hover {\n    background: #f8fafc;\n    border-color: #0fc179;\n        transform: translateY(-1px);\n        box-shadow: 0 2px 4px rgba(15, 193, 121, 0.1);\n  }\n  \n  &.selected {\n    border-color: #0fc179;\n    background: rgba(15, 193, 121, 0.05);\n    box-shadow: 0 2px 8px rgba(15, 193, 121, 0.15);\n  }\n  \n  input {\n    margin: 0;\n    margin-right: 0.75rem;\n    accent-color: #0fc179;\n  }\n  \n  span {\n    color: #2c3e50;\n    font-size: 0.65rem;\n    font-weight: 500;\n  }\n`;const TextInput=styled.input`\n  width: 100%;\n  padding: 0.6rem;\n  border: 2px solid rgba(15, 193, 121, 0.2);\n  border-radius: 6px;\n  font-size: 0.65rem;\n  transition: border-color 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #0fc179;\n  }\n`;const TextArea=styled.textarea`\n  width: 100%;\n  padding: 0.6rem;\n  border: 2px solid rgba(15, 193, 121, 0.2);\n  border-radius: 6px;\n  font-size: 0.75rem;\n  min-height: 40px;\n  resize: vertical;\n  transition: border-color 0.3s ease;\n  \n  &:focus {\n    outline: none;\n    border-color: #0fc179;\n  }\n`;const NavigationButtons=styled.div`\n  display: flex;\n  justify-content: space-between;\n  gap: 1rem;\n  margin-top: 1.5rem;\n  \n  button {\n    display: flex;\n    align-items: center;\n    gap: 0.5rem;\n    padding: 0.875rem 1.75rem;\n    border: none;\n    border-radius: 8px;\n    font-weight: 600;\n    font-size: 0.9rem;\n    cursor: pointer;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    position: relative;\n    overflow: hidden;\n    \n    &::before {\n      content: '';\n      position: absolute;\n      top: 0;\n      left: -100%;\n      width: 100%;\n      height: 100%;\n      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\n      transition: left 0.5s;\n    }\n    \n    &:hover::before {\n      left: 100%;\n    }\n    \n    &.previous {\n      background: #f8fafc;\n      color: #64748b;\n      border: 1px solid #e2e8f0;\n      \n      &:hover:not(:disabled) {\n        background: #f1f5f9;\n        color: #475569;\n        transform: translateX(-2px);\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n      }\n      \n      &:disabled {\n        opacity: 0.5;\n        cursor: not-allowed;\n      }\n    }\n    \n    &.next, &.submit {\n      background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\n      color: white;\n      box-shadow: 0 2px 8px rgba(15, 193, 121, 0.3);\n      \n      &:hover:not(:disabled) {\n        background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\n        transform: translateY(-2px);\n        box-shadow: 0 6px 16px rgba(15, 193, 121, 0.4);\n      }\n      \n      &:active:not(:disabled) {\n        transform: translateY(0);\n        box-shadow: 0 2px 8px rgba(15, 193, 121, 0.3);\n      }\n      \n      &:disabled {\n        opacity: 0.6;\n        cursor: not-allowed;\n        transform: none;\n        box-shadow: 0 2px 8px rgba(15, 193, 121, 0.2);\n      }\n    }\n    \n    &.submit {\n      background: linear-gradient(135deg, #059669 0%, #10b981 100%);\n      box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);\n      \n      &:hover:not(:disabled) {\n        background: linear-gradient(135deg, #047857 0%, #059669 100%);\n        box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\n      }\n      \n      &:disabled {\n        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);\n      }\n    }\n  }\n`;const LoadingSpinner=styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  padding: 3rem;\n  \n  &::after {\n    content: '';\n    width: 32px;\n    height: 32px;\n    border: 3px solid rgba(15, 193, 121, 0.1);\n    border-top: 3px solid #0fc179;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n  }\n  \n  @keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n  }\n`;const ErrorMessage=styled.div`\n  background: rgba(239, 68, 68, 0.1);\n  color: #dc2626;\n  padding: 0.75rem;\n  border-radius: 6px;\n  margin-bottom: 1rem;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  border: 1px solid rgba(239, 68, 68, 0.2);\n  font-size: 0.9rem;\n`;const SuccessMessage=styled.div`\n  background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\n  color: white;\n  padding: 0.8rem;\n  border-radius: 8px;\n  text-align: center;\n  box-shadow: 0 4px 15px rgba(15, 193, 121, 0.2);\n  \n  h3 {\n    margin: 1rem 0;\n    color: white;\n    font-size: 1rem;\n  }\n  \n  p {\n    margin: 0.5rem 0;\n    color: rgba(255, 255, 255, 0.9);\n    font-size: 0.85rem;\n  }\n  \n  button {\n    background: rgba(255, 255, 255, 0.1);\n    color: white;\n    padding: 0.4rem 1rem;\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 8px;\n    font-weight: 600;\n    cursor: pointer;\n    margin-top: 1rem;\n    transition: all 0.3s ease;\n    \n    &:hover {\n      background: rgba(255, 255, 255, 0.2);\n      transform: translateY(-1px);\n    }\n  }\n`;const SurveyDetail=()=>{const{id}=useParams();const navigate=useNavigate();const{user,refreshUser}=useAuth();const[survey,setSurvey]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[currentQuestion,setCurrentQuestion]=useState(0);const[responses,setResponses]=useState({});const[submitting,setSubmitting]=useState(false);const[completed,setCompleted]=useState(false);const[startTime]=useState(Date.now());const fetchSurvey=useCallback(async()=>{try{const response=await axios.get(`/surveys/${id}`);if(response.data.success){const srv=response.data.survey;const normalizedQuestions=(srv.questions||[]).map((q,idx)=>{const idSafe=q.id!==undefined?q.id:idx+1;switch(q.type){case'mcq_single':return{...q,id:idSafe,type:'multiple-choice',options:q.options||[]};case'mcq_multi':return{...q,id:idSafe,type:'checkbox',options:q.options||[]};case'short_text':return{...q,id:idSafe,type:'text'};case'number':return{...q,id:idSafe,type:'number'};case'rating':return{...q,id:idSafe,type:'rating',maxRating:q.scale||q.maxRating||5};case'dropdown':return{...q,id:idSafe,type:'dropdown',options:q.options||[]};case'date':return{...q,id:idSafe,type:'date',format:q.format||'yyyy-MM-dd'};case'matrix':return{...q,id:idSafe,type:'matrix',rows:q.rows||[],columns:q.columns||[]};default:return{...q,id:idSafe};}});setSurvey({...srv,questions:normalizedQuestions});}else{setError('Survey not found or not available');}}catch(error){if(error.response&&error.response.status===400&&error.response.data.message==='Survey already completed'){setCompleted(true);setError('You have already completed this survey. Thank you for your participation!');}else{setError('Failed to load survey. Please try again.');}}finally{setLoading(false);}},[id]);useEffect(()=>{fetchSurvey();},[fetchSurvey]);const handleResponseChange=(questionId,value)=>{setResponses(prev=>({...prev,[questionId]:value}));};const isCurrentQuestionAnswered=()=>{if(!survey||!survey.questions)return false;const question=survey.questions[currentQuestion];const response=responses[question.id];// For checkbox questions, check if at least one option is selected\nif(question.type==='checkbox'){return Array.isArray(response)&&response.length>0;}// For matrix, require selection for each row if required\nif(question.type==='matrix'){const rowCount=(question.rows||[]).length;if(!response||typeof response!=='object')return false;const answeredRows=Object.keys(response).length;return answeredRows>=rowCount;}// For other questions, check if response exists and is not empty\nreturn response!==undefined&&response!==''&&response!==null;};const validateAllRequiredQuestions=()=>{if(!survey||!survey.questions)return false;for(const question of survey.questions){if(question.required){const response=responses[question.id];// For checkbox questions, check if at least one option is selected\nif(question.type==='checkbox'){if(!Array.isArray(response)||response.length===0){return false;}}else{// For other questions, check if response exists and is not empty\nif(response===undefined||response===''||response===null){return false;}}}}return true;};const getRequiredQuestionsStatus=()=>{if(!survey||!survey.questions)return{completed:0,total:0};const requiredQuestions=survey.questions.filter(q=>q.required);const completedRequired=requiredQuestions.filter(question=>{const response=responses[question.id];if(question.type==='checkbox'){return Array.isArray(response)&&response.length>0;}return response!==undefined&&response!==''&&response!==null;});return{completed:completedRequired.length,total:requiredQuestions.length};};const handleNext=()=>{if(currentQuestion<survey.questions.length-1){setCurrentQuestion(prev=>prev+1);}};const handlePrevious=()=>{if(currentQuestion>0){setCurrentQuestion(prev=>prev-1);}};const handleSubmit=async()=>{// Validate all required questions are answered\nif(!validateAllRequiredQuestions()){setError('Please answer all required questions before submitting.');return;}setSubmitting(true);setError('');try{const timeSpent=Math.floor((Date.now()-startTime)/1000);const submissionData={responses,timeSpent};console.log('Submitting survey:',{surveyId:survey.id,submissionData,endpoint:`/surveys/${survey.id}/submit`});const response=await axios.post(`/surveys/${survey.id}/submit`,submissionData);console.log('Survey submission response:',response.data);if(response.data.success){setCompleted(true);// Refresh user data to get updated points\nawait refreshUser();// Navigate back to surveys page with completion flag to trigger data refresh\nsetTimeout(()=>{navigate('/surveys?completed=true&refresh=true');},2000);}else{setError(response.data.message||'Failed to submit survey');}}catch(error){var _error$response,_error$response2,_error$response2$data;console.error('Survey submission error:',error);console.error('Error response:',(_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data);setError(((_error$response2=error.response)===null||_error$response2===void 0?void 0:(_error$response2$data=_error$response2.data)===null||_error$response2$data===void 0?void 0:_error$response2$data.message)||'Failed to submit survey. Please try again.');}finally{setSubmitting(false);}};// Handle keyboard navigation\nconst handleKeyPress=useCallback(event=>{// Only handle Enter key\nif(event.key!=='Enter')return;// Don't interfere with form inputs that are focused\nconst activeElement=document.activeElement;if(activeElement&&(activeElement.tagName==='INPUT'||activeElement.tagName==='TEXTAREA')){// For text inputs, let Enter work normally (or move to next question)\nif(activeElement.type==='text'||activeElement.type==='email'||activeElement.type==='tel'||activeElement.type==='url'||activeElement.type==='number'||activeElement.type==='date'||activeElement.tagName==='TEXTAREA'){event.preventDefault();// Move to next question or submit\nif(currentQuestion===survey.questions.length-1){if(validateAllRequiredQuestions()){handleSubmit();}}else{const currentQuestionData=survey.questions[currentQuestion];if(!currentQuestionData.required||isCurrentQuestionAnswered()){handleNext();}}return;}}// For radio buttons and checkboxes, Enter should move to next question\nevent.preventDefault();if(currentQuestion===survey.questions.length-1){// Last question - submit if all required questions are answered\nif(validateAllRequiredQuestions()){handleSubmit();}}else{// Not last question - move to next if current question is answered (if required)\nconst currentQuestionData=survey.questions[currentQuestion];if(!currentQuestionData.required||isCurrentQuestionAnswered()){handleNext();}}},[currentQuestion,survey,responses,handleNext,handleSubmit,isCurrentQuestionAnswered,validateAllRequiredQuestions]);// Add keyboard event listener\nuseEffect(()=>{if(survey&&survey.questions&&survey.questions.length>0){document.addEventListener('keydown',handleKeyPress);return()=>{document.removeEventListener('keydown',handleKeyPress);};}},[handleKeyPress,survey]);const formatDuration=minutes=>{if(minutes<60){return`${minutes} min`;}const hours=Math.floor(minutes/60);const remainingMinutes=minutes%60;return remainingMinutes>0?`${hours}h ${remainingMinutes}m`:`${hours}h`;};const renderQuestion=question=>{const currentResponse=responses[question.id];switch(question.type){case'multiple-choice':return/*#__PURE__*/_jsx(OptionsContainer,{children:question.options.map((option,index)=>/*#__PURE__*/_jsxs(OptionLabel,{className:currentResponse===option?'selected':'',children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:`question_${question.id}`,value:option,checked:currentResponse===option,onChange:e=>handleResponseChange(question.id,e.target.value)}),/*#__PURE__*/_jsx(\"span\",{children:option})]},index))});case'checkbox':return/*#__PURE__*/_jsx(OptionsContainer,{children:question.options.map((option,index)=>{const selectedOptions=currentResponse||[];return/*#__PURE__*/_jsxs(OptionLabel,{className:selectedOptions.includes(option)?'selected':'',children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:option,checked:selectedOptions.includes(option),onChange:e=>{const newSelection=selectedOptions.includes(option)?selectedOptions.filter(item=>item!==option):[...selectedOptions,option];handleResponseChange(question.id,newSelection);}}),/*#__PURE__*/_jsx(\"span\",{children:option})]},index);})});case'dropdown':return/*#__PURE__*/_jsxs(\"select\",{value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),style:{padding:'0.6rem',border:'1px solid #e0e0e0',borderRadius:'6px'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select an option\"}),question.options.map((opt,idx)=>/*#__PURE__*/_jsx(\"option\",{value:opt,children:opt},idx))]});case'text':return/*#__PURE__*/_jsx(TextInput,{type:\"text\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter your answer...\"});case'textarea':return/*#__PURE__*/_jsx(TextArea,{value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter your detailed response...\"});case'rating':const maxRating=question.maxRating||5;return/*#__PURE__*/_jsx(OptionsContainer,{children:Array.from({length:maxRating},(_,i)=>i+1).map(rating=>/*#__PURE__*/_jsxs(OptionLabel,{className:currentResponse===rating?'selected':'',children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:`question_${question.id}`,value:rating,checked:currentResponse===rating,onChange:e=>handleResponseChange(question.id,parseInt(e.target.value))}),/*#__PURE__*/_jsx(\"span\",{children:rating})]},rating))});case'fill-in-the-blank':return/*#__PURE__*/_jsx(TextInput,{type:\"text\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Fill in the blank...\"});case'date':return/*#__PURE__*/_jsx(TextInput,{type:\"date\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Select a date...\"});case'number':return/*#__PURE__*/_jsx(TextInput,{type:\"number\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter a number...\"});case'matrix':const rows=question.rows||[];const cols=question.columns||[];const resp=currentResponse||{};return/*#__PURE__*/_jsx(\"div\",{style:{overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{style:{width:'100%',borderCollapse:'collapse'},children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'left',padding:'8px'}}),cols.map((c,i)=>/*#__PURE__*/_jsx(\"th\",{style:{textAlign:'center',padding:'8px',fontSize:'0.85rem',color:'#64748b'},children:c},i))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:rows.map((r,ri)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{style:{padding:'8px',fontSize:'0.9rem',color:'#374151'},children:r}),cols.map((c,ci)=>/*#__PURE__*/_jsx(\"td\",{style:{textAlign:'center',padding:'8px'},children:/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:`matrix_${question.id}_row_${ri}`,checked:resp[ri]===ci,onChange:()=>handleResponseChange(question.id,{...resp,[ri]:ci})})},ci))]},ri))})]})});case'email':return/*#__PURE__*/_jsx(TextInput,{type:\"email\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter your email...\"});case'phone':return/*#__PURE__*/_jsx(TextInput,{type:\"tel\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter your phone number...\"});case'url':return/*#__PURE__*/_jsx(TextInput,{type:\"url\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:\"Enter a URL...\"});default:// Fallback to text input for any unrecognized type\nreturn/*#__PURE__*/_jsx(TextInput,{type:\"text\",value:currentResponse||'',onChange:e=>handleResponseChange(question.id,e.target.value),placeholder:`Enter your answer for ${question.type} question...`});}};if(loading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(error&&!survey){return/*#__PURE__*/_jsxs(SurveyContainer,{children:[/*#__PURE__*/_jsxs(ErrorMessage,{children:[/*#__PURE__*/_jsx(FaExclamationTriangle,{}),error]}),/*#__PURE__*/_jsxs(BackButton,{onClick:()=>navigate('/surveys'),children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\"Back to Surveys\"]})]});}if(completed){return/*#__PURE__*/_jsx(SurveyContainer,{children:/*#__PURE__*/_jsxs(SuccessMessage,{children:[/*#__PURE__*/_jsx(FaCheckCircle,{size:48,style:{color:'#27ae60'}}),/*#__PURE__*/_jsx(\"h3\",{children:\"Survey Already Completed!\"}),/*#__PURE__*/_jsx(\"p\",{children:error||'Thank you for your participation.'}),survey&&survey.pointsReward&&/*#__PURE__*/_jsxs(\"p\",{children:[\"You've earned \",/*#__PURE__*/_jsxs(\"strong\",{children:[survey.pointsReward,\" points\"]}),\" for completing this survey.\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/surveys?completed=true'),children:\"Back to Surveys\"})]})});}if(!survey||!survey.questions||survey.questions.length===0){return/*#__PURE__*/_jsxs(SurveyContainer,{children:[/*#__PURE__*/_jsxs(ErrorMessage,{children:[/*#__PURE__*/_jsx(FaExclamationTriangle,{}),\"This survey is not available or has no questions.\"]}),/*#__PURE__*/_jsxs(BackButton,{onClick:()=>navigate('/surveys'),children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\"Back to Surveys\"]})]});}const currentQuestionData=survey.questions[currentQuestion];const progress=(currentQuestion+1)/survey.questions.length*100;return/*#__PURE__*/_jsxs(SurveyContainer,{children:[/*#__PURE__*/_jsxs(BackButton,{onClick:()=>navigate('/surveys'),children:[/*#__PURE__*/_jsx(FaArrowLeft,{}),\"Back to Surveys\"]}),/*#__PURE__*/_jsxs(SurveyHeader,{children:[/*#__PURE__*/_jsx(\"h1\",{children:survey.title}),/*#__PURE__*/_jsx(\"p\",{children:survey.description})]}),/*#__PURE__*/_jsxs(SurveyMeta,{children:[/*#__PURE__*/_jsxs(MetaItem,{children:[/*#__PURE__*/_jsx(Clock,{size:20,color:\"#0fc179\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',color:'#2c3e50'},children:formatDuration(survey.estimatedTime)}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',color:'#64748b'},children:\"Estimated time\"})]})]}),/*#__PURE__*/_jsxs(MetaItem,{children:[/*#__PURE__*/_jsx(DollarSign,{size:20,color:\"#10b981\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontWeight:'600',color:'#2c3e50'},children:[survey.pointsReward,\" points\"]}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',color:'#64748b'},children:\"Reward\"})]})]}),/*#__PURE__*/_jsxs(MetaItem,{children:[/*#__PURE__*/_jsx(Users,{size:20,color:\"#f59e0b\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'600',color:'#2c3e50'},children:survey.targetAudience||'General'}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.85rem',color:'#64748b'},children:\"Target audience\"})]})]})]}),error&&/*#__PURE__*/_jsxs(ErrorMessage,{children:[/*#__PURE__*/_jsx(FaExclamationTriangle,{}),error]}),/*#__PURE__*/_jsxs(ContentGrid,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(QuestionCard,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"question-number\",children:[\"Question \",currentQuestion+1]}),/*#__PURE__*/_jsx(\"h2\",{className:\"question-text\",children:currentQuestionData.question}),currentQuestionData.required&&/*#__PURE__*/_jsx(\"div\",{className:\"question-required\",children:\"* This question is required\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"question-content\",children:renderQuestion(currentQuestionData)}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.75rem',padding:'0.5rem',background:'rgba(15, 193, 121, 0.05)',border:'1px solid rgba(15, 193, 121, 0.1)',borderRadius:'4px',fontSize:'0.8rem',color:'#64748b',textAlign:'center'},children:[\"\\uD83D\\uDCA1 Press \",/*#__PURE__*/_jsx(\"kbd\",{style:{background:'#f1f5f9',border:'1px solid #cbd5e1',borderRadius:'3px',padding:'0.1rem 0.3rem',fontSize:'0.75rem',fontFamily:'monospace'},children:\"Enter\"}),\" to \",currentQuestion===survey.questions.length-1?'submit survey':'move to next question']})]}),/*#__PURE__*/_jsxs(NavigationButtons,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"previous\",onClick:handlePrevious,disabled:currentQuestion===0,children:[/*#__PURE__*/_jsx(ChevronLeft,{size:16}),\"Previous\"]}),currentQuestion===survey.questions.length-1?/*#__PURE__*/_jsx(\"button\",{className:\"submit\",onClick:handleSubmit,disabled:submitting||!validateAllRequiredQuestions(),children:submitting?'Submitting...':'Submit Survey'}):/*#__PURE__*/_jsxs(\"button\",{className:\"next\",onClick:handleNext,disabled:currentQuestionData.required&&!isCurrentQuestionAnswered(),children:[\"Next\",/*#__PURE__*/_jsx(ChevronRight,{size:16})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Card,{children:[/*#__PURE__*/_jsxs(CardHeader,{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Progress\"}),/*#__PURE__*/_jsxs(\"span\",{style:{color:'#0fc179',fontWeight:'600'},children:[Math.round(progress),\"%\"]})]}),/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"progress-track\",children:/*#__PURE__*/_jsx(\"div\",{className:\"progress-fill\",style:{width:`${progress}%`}})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.5rem',fontSize:'0.9rem',color:'#64748b'},children:[\"Question \",currentQuestion+1,\" of \",survey.questions.length]})]})]}),/*#__PURE__*/_jsxs(Card,{style:{marginTop:'1rem'},children:[/*#__PURE__*/_jsx(CardHeader,{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Survey Info\"})}),/*#__PURE__*/_jsx(CardContent,{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',flexDirection:'column',gap:'0.8rem'},children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#64748b'},children:\"Total Questions:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:survey.questions.length})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#64748b'},children:\"Current:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:currentQuestion+1})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#64748b'},children:\"Answered:\"}),/*#__PURE__*/_jsx(\"span\",{style:{fontWeight:'500'},children:Object.keys(responses).length})]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between'},children:[/*#__PURE__*/_jsx(\"span\",{style:{color:'#64748b'},children:\"Required:\"}),/*#__PURE__*/_jsxs(\"span\",{style:{fontWeight:'500',color:getRequiredQuestionsStatus().completed===getRequiredQuestionsStatus().total?'#059669':'#e74c3c'},children:[getRequiredQuestionsStatus().completed,\"/\",getRequiredQuestionsStatus().total]})]}),!validateAllRequiredQuestions()&&/*#__PURE__*/_jsx(\"div\",{style:{padding:'0.5rem',background:'#fef2f2',border:'1px solid #fecaca',borderRadius:'4px',fontSize:'0.8rem',color:'#dc2626'},children:\"Please complete all required questions to submit\"})]})})]})]})]})]});};export default SurveyDetail;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useParams","useNavigate","FaArrowLeft","FaCheckCircle","FaExclamationTriangle","Clock","Users","DollarSign","ChevronLeft","ChevronRight","useAuth","axios","styled","jsx","_jsx","jsxs","_jsxs","SurveyContainer","div","BackButton","button","NavButtons","SurveyHeader","SurveyMeta","MetaItem","ContentGrid","Card","CardHeader","CardContent","QuestionCard","OptionsContainer","OptionLabel","label","TextInput","input","TextArea","textarea","NavigationButtons","LoadingSpinner","ErrorMessage","SuccessMessage","SurveyDetail","id","navigate","user","refreshUser","survey","setSurvey","loading","setLoading","error","setError","currentQuestion","setCurrentQuestion","responses","setResponses","submitting","setSubmitting","completed","setCompleted","startTime","Date","now","fetchSurvey","response","get","data","success","srv","normalizedQuestions","questions","map","q","idx","idSafe","undefined","type","options","maxRating","scale","format","rows","columns","status","message","handleResponseChange","questionId","value","prev","isCurrentQuestionAnswered","question","Array","isArray","length","rowCount","answeredRows","Object","keys","validateAllRequiredQuestions","required","getRequiredQuestionsStatus","total","requiredQuestions","filter","completedRequired","handleNext","handlePrevious","handleSubmit","timeSpent","Math","floor","submissionData","console","log","surveyId","endpoint","post","setTimeout","_error$response","_error$response2","_error$response2$data","handleKeyPress","event","key","activeElement","document","tagName","preventDefault","currentQuestionData","addEventListener","removeEventListener","formatDuration","minutes","hours","remainingMinutes","renderQuestion","currentResponse","children","option","index","className","name","checked","onChange","e","target","selectedOptions","includes","newSelection","item","style","padding","border","borderRadius","opt","placeholder","from","_","i","rating","parseInt","cols","resp","overflowX","width","borderCollapse","textAlign","c","fontSize","color","r","ri","ci","onClick","size","pointsReward","progress","title","description","fontWeight","estimatedTime","targetAudience","marginTop","background","fontFamily","disabled","round","display","flexDirection","gap","justifyContent"],"sources":["C:/Users/hp/Desktop/ADMINCLIENTPANELDEMO/perfectclone/client/src/pages/SurveyDetail.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport { FaArrowLeft, FaCheckCircle, FaExclamationTriangle } from 'react-icons/fa';\r\nimport { Clock, Users, DollarSign, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport axios from 'axios';\r\nimport styled from 'styled-components';\r\n\r\nconst SurveyContainer = styled.div`\r\n  max-width: 1000px; // Reduced from 1200px\r\n  margin: 0 auto;\r\n  padding: 0.25rem; // Reduced from 0.3rem\r\n  min-height: calc(100vh - 120px);\r\n`;\r\n\r\nconst BackButton = styled.button`\r\n  background: none;\r\n  border: none;\r\n  color: #0fc179;\r\n  font-size: 0.55rem;\r\n  cursor: pointer;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.25rem;\r\n  margin-bottom: 0.3rem;\r\n  padding: 0.25rem 0;\r\n  transition: color 0.3s ease;\r\n  \r\n  &:hover {\r\n    color: #0fc179;\r\n  }\r\n  \r\n  svg {\r\n    font-size: 0.55rem;\r\n    flex-shrink: 0;\r\n  }\r\n`;\r\n\r\nconst NavButtons = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  margin-top: 0.5rem;\r\n  gap: 0.75rem;\r\n  \r\n  button {\r\n    padding: 0.4rem 0.8rem;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-weight: 600;\r\n    font-size: 0.85rem;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 0.5rem;\r\n    transition: all 0.3s ease;\r\n    \r\n    &:disabled {\r\n      opacity: 0.5;\r\n      cursor: not-allowed;\r\n    }\r\n    \r\n    &.previous {\r\n      background: white;\r\n      color: #0fc179;\r\n      border: 1px solid #e2e8f0;\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: #f8fafc;\r\n        border-color: #0fc179;\r\n        transform: translateY(-1px);\r\n      }\r\n    }\r\n    \r\n    &.next {\r\n      background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\r\n      color: white;\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\r\n        transform: translateY(-1px);\r\n        box-shadow: 0 4px 12px rgba(15, 193, 121, 0.3);\r\n      }\r\n    }\r\n    \r\n    &.submit {\r\n      background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);\r\n      color: white;\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: linear-gradient(135deg, #2ecc71 0%, #27ae60 100%);\r\n        transform: translateY(-1px);\r\n        box-shadow: 0 4px 12px rgba(46, 204, 113, 0.3);\r\n      }\r\n    }\r\n    \r\n    svg {\r\n      font-size: 0.8rem;\r\n      flex-shrink: 0;\r\n    }\r\n  }\r\n`;\r\n\r\nconst SurveyHeader = styled.div`\r\n  background: linear-gradient(to bottom, #0fc179 0%, #0fc179 100%);\r\n  color: white;\r\n  padding: 0.3rem; // Reduced from 0.4rem\r\n  border-radius: 2px;\r\n  margin-bottom: 0.6rem; // Reduced from 0.8rem\r\n  \r\n  h1 {\r\n    color: white;\r\n    margin: 0 0 0.25rem 0;\r\n    font-size: 0.9rem; // Reduced from 1rem\r\n  }\r\n  \r\n  p {\r\n    color: rgba(255, 255, 255, 0.9);\r\n    margin: 0;\r\n    opacity: 0.9;\r\n    font-size: 0.65rem; // Reduced from 0.7rem\r\n  }\r\n`;\r\n\r\nconst SurveyMeta = styled.div`\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); // Reduced from 200px\r\n  gap: 0.4rem; // Reduced from 0.5rem\r\n  margin-bottom: 0.6rem; // Reduced from 0.8rem\r\n`;\r\n\r\nconst MetaItem = styled.div`\r\n  background: white;\r\n  padding: 0.4rem; // Reduced from 0.5rem\r\n  border-radius: 3px;\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.4rem; // Reduced from 0.5rem\r\n  transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n  border: 1px solid #e2e8f0;\r\n  \r\n  &:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 3px 10px rgba(15, 193, 121, 0.12);\r\n  }\r\n`;\r\n\r\nconst ContentGrid = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 1fr 240px; // Reduced from 280px\r\n  gap: 0.6rem; // Reduced from 0.75rem\r\n  \r\n  @media (max-width: 968px) {\r\n    grid-template-columns: 1fr;\r\n  }\r\n`;\r\n\r\nconst Card = styled.div`\r\n  background: white;\r\n  border-radius: 5px; // Reduced from 6px\r\n  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);\r\n  overflow: hidden;\r\n  border: 1px solid #e2e8f0;\r\n`;\r\n\r\nconst CardHeader = styled.div`\r\n  padding: 0.6rem; // Reduced from 0.75rem\r\n  border-bottom: 1px solid #e0e0e0;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  \r\n  h2 {\r\n    margin: 0;\r\n    color: #2c3e50;\r\n    font-size: 0.7rem; // Reduced from 0.8rem\r\n  }\r\n`;\r\n\r\nconst CardContent = styled.div`\r\n  padding: 0.6rem; // Reduced from 0.75rem\r\n  \r\n  .progress-track {\r\n    width: 100%;\r\n    height: 10px;\r\n    background: #f1f5f9;\r\n    border-radius: 6px;\r\n    overflow: hidden;\r\n    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.1);\r\n    \r\n    .progress-fill {\r\n      height: 100%;\r\n      background: linear-gradient(90deg, #0fc179 0%, #0fc179 50%, #0fc179 100%);\r\n      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);\r\n      border-radius: 6px;\r\n      position: relative;\r\n      \r\n      &::after {\r\n        content: '';\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%);\r\n        animation: shimmer 2s infinite;\r\n      }\r\n    }\r\n  }\r\n  \r\n  @keyframes shimmer {\r\n    0% { transform: translateX(-100%); }\r\n    100% { transform: translateX(100%); }\r\n  }\r\n`;\r\n\r\n\r\n\r\nconst QuestionCard = styled.div`\r\n  background: white;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);\r\n  border: 1px solid #e2e8f0;\r\n  overflow: hidden;\r\n  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n  animation: slideIn 0.4s ease-out;\r\n  \r\n  @keyframes slideIn {\r\n    from {\r\n      opacity: 0;\r\n      transform: translateY(20px);\r\n    }\r\n    to {\r\n      opacity: 1;\r\n      transform: translateY(0);\r\n    }\r\n  }\r\n  \r\n  &:hover {\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.12);\r\n    transform: translateY(-1px);\r\n  }\r\n  \r\n  .question-header {\r\n    padding: 0.75rem;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background: #f8fafc;\r\n    \r\n    .question-number {\r\n      color: #0fc179;\r\n      font-weight: 600;\r\n      font-size: 0.8rem;\r\n      margin-bottom: 0.2rem;\r\n    }\r\n    \r\n    .question-text {\r\n      color: #2c3e50;\r\n      font-size: 1rem;\r\n      font-weight: 500;\r\n      margin: 0;\r\n      line-height: 1.4;\r\n    }\r\n    \r\n    .question-required {\r\n      color: #e74c3c;\r\n      font-size: 0.8rem;\r\n      margin-top: 0.5rem;\r\n    }\r\n  }\r\n  \r\n  .question-content {\r\n    padding: 0.75rem;\r\n  }\r\n`;\r\n\r\nconst OptionsContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  gap: 0.4rem;\r\n`;\r\n\r\nconst OptionLabel = styled.label`\r\n  display: flex;\r\n  align-items: center;\r\n  padding: 0.4rem;\r\n  border: 1px solid #e2e8f0;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  background: white;\r\n  \r\n  &:hover {\r\n    background: #f8fafc;\r\n    border-color: #0fc179;\r\n        transform: translateY(-1px);\r\n        box-shadow: 0 2px 4px rgba(15, 193, 121, 0.1);\r\n  }\r\n  \r\n  &.selected {\r\n    border-color: #0fc179;\r\n    background: rgba(15, 193, 121, 0.05);\r\n    box-shadow: 0 2px 8px rgba(15, 193, 121, 0.15);\r\n  }\r\n  \r\n  input {\r\n    margin: 0;\r\n    margin-right: 0.75rem;\r\n    accent-color: #0fc179;\r\n  }\r\n  \r\n  span {\r\n    color: #2c3e50;\r\n    font-size: 0.65rem;\r\n    font-weight: 500;\r\n  }\r\n`;\r\n\r\nconst TextInput = styled.input`\r\n  width: 100%;\r\n  padding: 0.6rem;\r\n  border: 2px solid rgba(15, 193, 121, 0.2);\r\n  border-radius: 6px;\r\n  font-size: 0.65rem;\r\n  transition: border-color 0.3s ease;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #0fc179;\r\n  }\r\n`;\r\n\r\nconst TextArea = styled.textarea`\r\n  width: 100%;\r\n  padding: 0.6rem;\r\n  border: 2px solid rgba(15, 193, 121, 0.2);\r\n  border-radius: 6px;\r\n  font-size: 0.75rem;\r\n  min-height: 40px;\r\n  resize: vertical;\r\n  transition: border-color 0.3s ease;\r\n  \r\n  &:focus {\r\n    outline: none;\r\n    border-color: #0fc179;\r\n  }\r\n`;\r\n\r\nconst NavigationButtons = styled.div`\r\n  display: flex;\r\n  justify-content: space-between;\r\n  gap: 1rem;\r\n  margin-top: 1.5rem;\r\n  \r\n  button {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 0.5rem;\r\n    padding: 0.875rem 1.75rem;\r\n    border: none;\r\n    border-radius: 8px;\r\n    font-weight: 600;\r\n    font-size: 0.9rem;\r\n    cursor: pointer;\r\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\r\n    position: relative;\r\n    overflow: hidden;\r\n    \r\n    &::before {\r\n      content: '';\r\n      position: absolute;\r\n      top: 0;\r\n      left: -100%;\r\n      width: 100%;\r\n      height: 100%;\r\n      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);\r\n      transition: left 0.5s;\r\n    }\r\n    \r\n    &:hover::before {\r\n      left: 100%;\r\n    }\r\n    \r\n    &.previous {\r\n      background: #f8fafc;\r\n      color: #64748b;\r\n      border: 1px solid #e2e8f0;\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: #f1f5f9;\r\n        color: #475569;\r\n        transform: translateX(-2px);\r\n        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n      }\r\n      \r\n      &:disabled {\r\n        opacity: 0.5;\r\n        cursor: not-allowed;\r\n      }\r\n    }\r\n    \r\n    &.next, &.submit {\r\n      background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\r\n      color: white;\r\n      box-shadow: 0 2px 8px rgba(15, 193, 121, 0.3);\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\r\n        transform: translateY(-2px);\r\n        box-shadow: 0 6px 16px rgba(15, 193, 121, 0.4);\r\n      }\r\n      \r\n      &:active:not(:disabled) {\r\n        transform: translateY(0);\r\n        box-shadow: 0 2px 8px rgba(15, 193, 121, 0.3);\r\n      }\r\n      \r\n      &:disabled {\r\n        opacity: 0.6;\r\n        cursor: not-allowed;\r\n        transform: none;\r\n        box-shadow: 0 2px 8px rgba(15, 193, 121, 0.2);\r\n      }\r\n    }\r\n    \r\n    &.submit {\r\n      background: linear-gradient(135deg, #059669 0%, #10b981 100%);\r\n      box-shadow: 0 2px 8px rgba(16, 185, 129, 0.3);\r\n      \r\n      &:hover:not(:disabled) {\r\n        background: linear-gradient(135deg, #047857 0%, #059669 100%);\r\n        box-shadow: 0 6px 16px rgba(16, 185, 129, 0.4);\r\n      }\r\n      \r\n      &:disabled {\r\n        box-shadow: 0 2px 8px rgba(16, 185, 129, 0.2);\r\n      }\r\n    }\r\n  }\r\n`;\r\n\r\nconst LoadingSpinner = styled.div`\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  padding: 3rem;\r\n  \r\n  &::after {\r\n    content: '';\r\n    width: 32px;\r\n    height: 32px;\r\n    border: 3px solid rgba(15, 193, 121, 0.1);\r\n    border-top: 3px solid #0fc179;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n  }\r\n  \r\n  @keyframes spin {\r\n    0% { transform: rotate(0deg); }\r\n    100% { transform: rotate(360deg); }\r\n  }\r\n`;\r\n\r\nconst ErrorMessage = styled.div`\r\n  background: rgba(239, 68, 68, 0.1);\r\n  color: #dc2626;\r\n  padding: 0.75rem;\r\n  border-radius: 6px;\r\n  margin-bottom: 1rem;\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 0.5rem;\r\n  border: 1px solid rgba(239, 68, 68, 0.2);\r\n  font-size: 0.9rem;\r\n`;\r\n\r\nconst SuccessMessage = styled.div`\r\n  background: linear-gradient(135deg, #0fc179 0%, #0fc179 100%);\r\n  color: white;\r\n  padding: 0.8rem;\r\n  border-radius: 8px;\r\n  text-align: center;\r\n  box-shadow: 0 4px 15px rgba(15, 193, 121, 0.2);\r\n  \r\n  h3 {\r\n    margin: 1rem 0;\r\n    color: white;\r\n    font-size: 1rem;\r\n  }\r\n  \r\n  p {\r\n    margin: 0.5rem 0;\r\n    color: rgba(255, 255, 255, 0.9);\r\n    font-size: 0.85rem;\r\n  }\r\n  \r\n  button {\r\n    background: rgba(255, 255, 255, 0.1);\r\n    color: white;\r\n    padding: 0.4rem 1rem;\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    border-radius: 8px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    margin-top: 1rem;\r\n    transition: all 0.3s ease;\r\n    \r\n    &:hover {\r\n      background: rgba(255, 255, 255, 0.2);\r\n      transform: translateY(-1px);\r\n    }\r\n  }\r\n`;\r\n\r\nconst SurveyDetail = () => {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const { user, refreshUser } = useAuth();\r\n  const [survey, setSurvey] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [currentQuestion, setCurrentQuestion] = useState(0);\r\n  const [responses, setResponses] = useState({});\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [completed, setCompleted] = useState(false);\r\n  const [startTime] = useState(Date.now());\r\n\r\n  const fetchSurvey = useCallback(async () => {\r\n    try {\r\n      const response = await axios.get(`/surveys/${id}`);\r\n      if (response.data.success) {\r\n        const srv = response.data.survey;\r\n        const normalizedQuestions = (srv.questions || []).map((q, idx) => {\r\n          const idSafe = q.id !== undefined ? q.id : idx + 1;\r\n          switch (q.type) {\r\n            case 'mcq_single':\r\n              return { ...q, id: idSafe, type: 'multiple-choice', options: q.options || [] };\r\n            case 'mcq_multi':\r\n              return { ...q, id: idSafe, type: 'checkbox', options: q.options || [] };\r\n            case 'short_text':\r\n              return { ...q, id: idSafe, type: 'text' };\r\n            case 'number':\r\n              return { ...q, id: idSafe, type: 'number' };\r\n            case 'rating':\r\n              return { ...q, id: idSafe, type: 'rating', maxRating: q.scale || q.maxRating || 5 };\r\n            case 'dropdown':\r\n              return { ...q, id: idSafe, type: 'dropdown', options: q.options || [] };\r\n            case 'date':\r\n              return { ...q, id: idSafe, type: 'date', format: q.format || 'yyyy-MM-dd' };\r\n            case 'matrix':\r\n              return { ...q, id: idSafe, type: 'matrix', rows: q.rows || [], columns: q.columns || [] };\r\n            default:\r\n              return { ...q, id: idSafe };\r\n          }\r\n        });\r\n        setSurvey({ ...srv, questions: normalizedQuestions });\r\n      } else {\r\n        setError('Survey not found or not available');\r\n      }\r\n    } catch (error) {\r\n      if (error.response && error.response.status === 400 && \r\n          error.response.data.message === 'Survey already completed') {\r\n        setCompleted(true);\r\n        setError('You have already completed this survey. Thank you for your participation!');\r\n      } else {\r\n        setError('Failed to load survey. Please try again.');\r\n      }\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [id]);\r\n\r\n  useEffect(() => {\r\n    fetchSurvey();\r\n  }, [fetchSurvey]);\r\n\r\n  const handleResponseChange = (questionId, value) => {\r\n    setResponses(prev => ({\r\n      ...prev,\r\n      [questionId]: value\r\n    }));\r\n  };\r\n\r\n  const isCurrentQuestionAnswered = () => {\r\n    if (!survey || !survey.questions) return false;\r\n    const question = survey.questions[currentQuestion];\r\n    const response = responses[question.id];\r\n    \r\n    // For checkbox questions, check if at least one option is selected\r\n    if (question.type === 'checkbox') {\r\n      return Array.isArray(response) && response.length > 0;\r\n    }\r\n    // For matrix, require selection for each row if required\r\n    if (question.type === 'matrix') {\r\n      const rowCount = (question.rows || []).length;\r\n      if (!response || typeof response !== 'object') return false;\r\n      const answeredRows = Object.keys(response).length;\r\n      return answeredRows >= rowCount;\r\n    }\r\n    \r\n    // For other questions, check if response exists and is not empty\r\n    return response !== undefined && response !== '' && response !== null;\r\n  };\r\n\r\n  const validateAllRequiredQuestions = () => {\r\n    if (!survey || !survey.questions) return false;\r\n    \r\n    for (const question of survey.questions) {\r\n      if (question.required) {\r\n        const response = responses[question.id];\r\n        \r\n        // For checkbox questions, check if at least one option is selected\r\n        if (question.type === 'checkbox') {\r\n          if (!Array.isArray(response) || response.length === 0) {\r\n            return false;\r\n          }\r\n        } else {\r\n          // For other questions, check if response exists and is not empty\r\n          if (response === undefined || response === '' || response === null) {\r\n            return false;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    return true;\r\n  };\r\n\r\n  const getRequiredQuestionsStatus = () => {\r\n    if (!survey || !survey.questions) return { completed: 0, total: 0 };\r\n    \r\n    const requiredQuestions = survey.questions.filter(q => q.required);\r\n    const completedRequired = requiredQuestions.filter(question => {\r\n      const response = responses[question.id];\r\n      \r\n      if (question.type === 'checkbox') {\r\n        return Array.isArray(response) && response.length > 0;\r\n      }\r\n      \r\n      return response !== undefined && response !== '' && response !== null;\r\n    });\r\n    \r\n    return {\r\n      completed: completedRequired.length,\r\n      total: requiredQuestions.length\r\n    };\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (currentQuestion < survey.questions.length - 1) {\r\n      setCurrentQuestion(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handlePrevious = () => {\r\n    if (currentQuestion > 0) {\r\n      setCurrentQuestion(prev => prev - 1);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async () => {\r\n    // Validate all required questions are answered\r\n    if (!validateAllRequiredQuestions()) {\r\n      setError('Please answer all required questions before submitting.');\r\n      return;\r\n    }\r\n    \r\n    setSubmitting(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const timeSpent = Math.floor((Date.now() - startTime) / 1000);\r\n      \r\n      const submissionData = {\r\n        responses,\r\n        timeSpent\r\n      };\r\n      \r\n      console.log('Submitting survey:', {\r\n        surveyId: survey.id,\r\n        submissionData,\r\n        endpoint: `/surveys/${survey.id}/submit`\r\n      });\r\n      \r\n      const response = await axios.post(`/surveys/${survey.id}/submit`, submissionData);\r\n      \r\n      console.log('Survey submission response:', response.data);\r\n      \r\n      if (response.data.success) {\r\n        setCompleted(true);\r\n        // Refresh user data to get updated points\r\n        await refreshUser();\r\n        // Navigate back to surveys page with completion flag to trigger data refresh\r\n        setTimeout(() => {\r\n          navigate('/surveys?completed=true&refresh=true');\r\n        }, 2000);\r\n      } else {\r\n        setError(response.data.message || 'Failed to submit survey');\r\n      }\r\n    } catch (error) {\r\n      console.error('Survey submission error:', error);\r\n      console.error('Error response:', error.response?.data);\r\n      setError(error.response?.data?.message || 'Failed to submit survey. Please try again.');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  // Handle keyboard navigation\r\n  const handleKeyPress = useCallback((event) => {\r\n    // Only handle Enter key\r\n    if (event.key !== 'Enter') return;\r\n    \r\n    // Don't interfere with form inputs that are focused\r\n    const activeElement = document.activeElement;\r\n    if (activeElement && (activeElement.tagName === 'INPUT' || activeElement.tagName === 'TEXTAREA')) {\r\n      // For text inputs, let Enter work normally (or move to next question)\r\n      if (activeElement.type === 'text' || activeElement.type === 'email' || activeElement.type === 'tel' || \r\n          activeElement.type === 'url' || activeElement.type === 'number' || activeElement.type === 'date' || \r\n          activeElement.tagName === 'TEXTAREA') {\r\n        event.preventDefault();\r\n        // Move to next question or submit\r\n        if (currentQuestion === survey.questions.length - 1) {\r\n          if (validateAllRequiredQuestions()) {\r\n            handleSubmit();\r\n          }\r\n        } else {\r\n          const currentQuestionData = survey.questions[currentQuestion];\r\n          if (!currentQuestionData.required || isCurrentQuestionAnswered()) {\r\n            handleNext();\r\n          }\r\n        }\r\n        return;\r\n      }\r\n    }\r\n    \r\n    // For radio buttons and checkboxes, Enter should move to next question\r\n    event.preventDefault();\r\n    \r\n    if (currentQuestion === survey.questions.length - 1) {\r\n      // Last question - submit if all required questions are answered\r\n      if (validateAllRequiredQuestions()) {\r\n        handleSubmit();\r\n      }\r\n    } else {\r\n      // Not last question - move to next if current question is answered (if required)\r\n      const currentQuestionData = survey.questions[currentQuestion];\r\n      if (!currentQuestionData.required || isCurrentQuestionAnswered()) {\r\n        handleNext();\r\n      }\r\n    }\r\n  }, [currentQuestion, survey, responses, handleNext, handleSubmit, isCurrentQuestionAnswered, validateAllRequiredQuestions]);\r\n\r\n  // Add keyboard event listener\r\n  useEffect(() => {\r\n    if (survey && survey.questions && survey.questions.length > 0) {\r\n      document.addEventListener('keydown', handleKeyPress);\r\n      return () => {\r\n        document.removeEventListener('keydown', handleKeyPress);\r\n      };\r\n    }\r\n  }, [handleKeyPress, survey]);\r\n\r\n  const formatDuration = (minutes) => {\r\n    if (minutes < 60) {\r\n      return `${minutes} min`;\r\n    }\r\n    const hours = Math.floor(minutes / 60);\r\n    const remainingMinutes = minutes % 60;\r\n    return remainingMinutes > 0 ? `${hours}h ${remainingMinutes}m` : `${hours}h`;\r\n  };\r\n\r\n  const renderQuestion = (question) => {\r\n    const currentResponse = responses[question.id];\r\n    \r\n    switch (question.type) {\r\n      case 'multiple-choice':\r\n        return (\r\n          <OptionsContainer>\r\n            {question.options.map((option, index) => (\r\n              <OptionLabel\r\n                key={index}\r\n                className={currentResponse === option ? 'selected' : ''}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name={`question_${question.id}`}\r\n                  value={option}\r\n                  checked={currentResponse === option}\r\n                  onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n                />\r\n                <span>{option}</span>\r\n              </OptionLabel>\r\n            ))}\r\n          </OptionsContainer>\r\n        );\r\n        \r\n      case 'checkbox':\r\n        return (\r\n          <OptionsContainer>\r\n            {question.options.map((option, index) => {\r\n              const selectedOptions = currentResponse || [];\r\n              return (\r\n                <OptionLabel\r\n                  key={index}\r\n                  className={selectedOptions.includes(option) ? 'selected' : ''}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    value={option}\r\n                    checked={selectedOptions.includes(option)}\r\n                    onChange={(e) => {\r\n                      const newSelection = selectedOptions.includes(option)\r\n                        ? selectedOptions.filter(item => item !== option)\r\n                        : [...selectedOptions, option];\r\n                      handleResponseChange(question.id, newSelection);\r\n                    }}\r\n                  />\r\n                  <span>{option}</span>\r\n                </OptionLabel>\r\n              );\r\n            })}\r\n          </OptionsContainer>\r\n        );\r\n\r\n      case 'dropdown':\r\n        return (\r\n          <select\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            style={{ padding: '0.6rem', border: '1px solid #e0e0e0', borderRadius: '6px' }}\r\n          >\r\n            <option value=\"\">Select an option</option>\r\n            {question.options.map((opt, idx) => (\r\n              <option key={idx} value={opt}>{opt}</option>\r\n            ))}\r\n          </select>\r\n        );\r\n        \r\n      case 'text':\r\n        return (\r\n          <TextInput\r\n            type=\"text\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter your answer...\"\r\n          />\r\n        );\r\n        \r\n      case 'textarea':\r\n        return (\r\n          <TextArea\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter your detailed response...\"\r\n          />\r\n        );\r\n        \r\n      case 'rating':\r\n        const maxRating = question.maxRating || 5;\r\n        return (\r\n          <OptionsContainer>\r\n            {Array.from({ length: maxRating }, (_, i) => i + 1).map(rating => (\r\n              <OptionLabel\r\n                key={rating}\r\n                className={currentResponse === rating ? 'selected' : ''}\r\n              >\r\n                <input\r\n                  type=\"radio\"\r\n                  name={`question_${question.id}`}\r\n                  value={rating}\r\n                  checked={currentResponse === rating}\r\n                  onChange={(e) => handleResponseChange(question.id, parseInt(e.target.value))}\r\n                />\r\n                <span>{rating}</span>\r\n              </OptionLabel>\r\n            ))}\r\n          </OptionsContainer>\r\n        );\r\n        \r\n      case 'fill-in-the-blank':\r\n        return (\r\n          <TextInput\r\n            type=\"text\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Fill in the blank...\"\r\n          />\r\n        );\r\n        \r\n      case 'date':\r\n        return (\r\n          <TextInput\r\n            type=\"date\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Select a date...\"\r\n          />\r\n        );\r\n        \r\n      case 'number':\r\n        return (\r\n          <TextInput\r\n            type=\"number\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter a number...\"\r\n          />\r\n        );\r\n\r\n      case 'matrix':\r\n        const rows = question.rows || [];\r\n        const cols = question.columns || [];\r\n        const resp = currentResponse || {};\r\n        return (\r\n          <div style={{ overflowX: 'auto' }}>\r\n            <table style={{ width: '100%', borderCollapse: 'collapse' }}>\r\n              <thead>\r\n                <tr>\r\n                  <th style={{ textAlign: 'left', padding: '8px' }}></th>\r\n                  {cols.map((c, i) => (\r\n                    <th key={i} style={{ textAlign: 'center', padding: '8px', fontSize: '0.85rem', color: '#64748b' }}>{c}</th>\r\n                  ))}\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {rows.map((r, ri) => (\r\n                  <tr key={ri}>\r\n                    <td style={{ padding: '8px', fontSize: '0.9rem', color: '#374151' }}>{r}</td>\r\n                    {cols.map((c, ci) => (\r\n                      <td key={ci} style={{ textAlign: 'center', padding: '8px' }}>\r\n                        <input\r\n                          type=\"radio\"\r\n                          name={`matrix_${question.id}_row_${ri}`}\r\n                          checked={resp[ri] === ci}\r\n                          onChange={() => handleResponseChange(question.id, { ...resp, [ri]: ci })}\r\n                        />\r\n                      </td>\r\n                    ))}\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        );\r\n        \r\n      case 'email':\r\n        return (\r\n          <TextInput\r\n            type=\"email\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter your email...\"\r\n          />\r\n        );\r\n        \r\n      case 'phone':\r\n        return (\r\n          <TextInput\r\n            type=\"tel\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter your phone number...\"\r\n          />\r\n        );\r\n        \r\n      case 'url':\r\n        return (\r\n          <TextInput\r\n            type=\"url\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder=\"Enter a URL...\"\r\n          />\r\n        );\r\n        \r\n      default:\r\n        // Fallback to text input for any unrecognized type\r\n        return (\r\n          <TextInput\r\n            type=\"text\"\r\n            value={currentResponse || ''}\r\n            onChange={(e) => handleResponseChange(question.id, e.target.value)}\r\n            placeholder={`Enter your answer for ${question.type} question...`}\r\n          />\r\n        );\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <LoadingSpinner />;\r\n  }\r\n\r\n  if (error && !survey) {\r\n    return (\r\n      <SurveyContainer>\r\n        <ErrorMessage>\r\n          <FaExclamationTriangle />\r\n          {error}\r\n        </ErrorMessage>\r\n        <BackButton onClick={() => navigate('/surveys')}>\r\n          <FaArrowLeft />\r\n          Back to Surveys\r\n        </BackButton>\r\n      </SurveyContainer>\r\n    );\r\n  }\r\n\r\n  if (completed) {\r\n    return (\r\n      <SurveyContainer>\r\n        <SuccessMessage>\r\n          <FaCheckCircle size={48} style={{ color: '#27ae60' }} />\r\n          <h3>Survey Already Completed!</h3>\r\n          <p>{error || 'Thank you for your participation.'}</p>\r\n          {survey && survey.pointsReward && (\r\n            <p>You've earned <strong>{survey.pointsReward} points</strong> for completing this survey.</p>\r\n          )}\r\n          <button onClick={() => navigate('/surveys?completed=true')}>Back to Surveys</button>\r\n        </SuccessMessage>\r\n      </SurveyContainer>\r\n    );\r\n  }\r\n\r\n  if (!survey || !survey.questions || survey.questions.length === 0) {\r\n    return (\r\n      <SurveyContainer>\r\n        <ErrorMessage>\r\n          <FaExclamationTriangle />\r\n          This survey is not available or has no questions.\r\n        </ErrorMessage>\r\n        <BackButton onClick={() => navigate('/surveys')}>\r\n          <FaArrowLeft />\r\n          Back to Surveys\r\n        </BackButton>\r\n      </SurveyContainer>\r\n    );\r\n  }\r\n\r\n  const currentQuestionData = survey.questions[currentQuestion];\r\n  const progress = ((currentQuestion + 1) / survey.questions.length) * 100;\r\n\r\n  return (\r\n    <SurveyContainer>\r\n      <BackButton onClick={() => navigate('/surveys')}>\r\n        <FaArrowLeft />\r\n        Back to Surveys\r\n      </BackButton>\r\n\r\n      <SurveyHeader>\r\n        <h1>{survey.title}</h1>\r\n        <p>{survey.description}</p>\r\n      </SurveyHeader>\r\n      \r\n      <SurveyMeta>\r\n        <MetaItem>\r\n          <Clock size={20} color=\"#0fc179\" />\r\n          <div>\r\n            <div style={{fontWeight: '600', color: '#2c3e50'}}>{formatDuration(survey.estimatedTime)}</div>\r\n            <div style={{fontSize: '0.85rem', color: '#64748b'}}>Estimated time</div>\r\n          </div>\r\n        </MetaItem>\r\n        <MetaItem>\r\n          <DollarSign size={20} color=\"#10b981\" />\r\n          <div>\r\n            <div style={{fontWeight: '600', color: '#2c3e50'}}>{survey.pointsReward} points</div>\r\n            <div style={{fontSize: '0.85rem', color: '#64748b'}}>Reward</div>\r\n          </div>\r\n        </MetaItem>\r\n        <MetaItem>\r\n          <Users size={20} color=\"#f59e0b\" />\r\n          <div>\r\n            <div style={{fontWeight: '600', color: '#2c3e50'}}>{survey.targetAudience || 'General'}</div>\r\n            <div style={{fontSize: '0.85rem', color: '#64748b'}}>Target audience</div>\r\n          </div>\r\n        </MetaItem>\r\n      </SurveyMeta>\r\n\r\n      {error && (\r\n        <ErrorMessage>\r\n          <FaExclamationTriangle />\r\n          {error}\r\n        </ErrorMessage>\r\n      )}\r\n\r\n      <ContentGrid>\r\n        <div>\r\n          <QuestionCard>\r\n            <div className=\"question-header\">\r\n              <div className=\"question-number\">\r\n                Question {currentQuestion + 1}\r\n              </div>\r\n              <h2 className=\"question-text\">\r\n                {currentQuestionData.question}\r\n              </h2>\r\n              {currentQuestionData.required && (\r\n                <div className=\"question-required\">\r\n                  * This question is required\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"question-content\">\r\n              {renderQuestion(currentQuestionData)}\r\n            </div>\r\n            \r\n            {/* Enter key hint */}\r\n            <div style={{\r\n              marginTop: '0.75rem',\r\n              padding: '0.5rem',\r\n              background: 'rgba(15, 193, 121, 0.05)',\r\n              border: '1px solid rgba(15, 193, 121, 0.1)',\r\n              borderRadius: '4px',\r\n              fontSize: '0.8rem',\r\n              color: '#64748b',\r\n              textAlign: 'center'\r\n            }}>\r\n               Press <kbd style={{\r\n                background: '#f1f5f9',\r\n                border: '1px solid #cbd5e1',\r\n                borderRadius: '3px',\r\n                padding: '0.1rem 0.3rem',\r\n                fontSize: '0.75rem',\r\n                fontFamily: 'monospace'\r\n              }}>Enter</kbd> to {currentQuestion === survey.questions.length - 1 ? 'submit survey' : 'move to next question'}\r\n            </div>\r\n          </QuestionCard>\r\n\r\n          <NavigationButtons>\r\n            <button\r\n              className=\"previous\"\r\n              onClick={handlePrevious}\r\n              disabled={currentQuestion === 0}\r\n            >\r\n              <ChevronLeft size={16} />\r\n              Previous\r\n            </button>\r\n            \r\n            {currentQuestion === survey.questions.length - 1 ? (\r\n              <button\r\n                className=\"submit\"\r\n                onClick={handleSubmit}\r\n                disabled={submitting || !validateAllRequiredQuestions()}\r\n              >\r\n                {submitting ? 'Submitting...' : 'Submit Survey'}\r\n              </button>\r\n            ) : (\r\n              <button\r\n                className=\"next\"\r\n                onClick={handleNext}\r\n                disabled={currentQuestionData.required && !isCurrentQuestionAnswered()}\r\n              >\r\n                Next\r\n                <ChevronRight size={16} />\r\n              </button>\r\n            )}\r\n          </NavigationButtons>\r\n        </div>\r\n        \r\n        <div>\r\n          <Card>\r\n             <CardHeader>\r\n               <h2>Progress</h2>\r\n               <span style={{color: '#0fc179', fontWeight: '600'}}>\r\n                 {Math.round(progress)}%\r\n               </span>\r\n             </CardHeader>\r\n             <CardContent>\r\n               <div className=\"progress-track\">\r\n                 <div className=\"progress-fill\" style={{ width: `${progress}%` }} />\r\n               </div>\r\n               <div style={{marginTop: '0.5rem', fontSize: '0.9rem', color: '#64748b'}}>\r\n                 Question {currentQuestion + 1} of {survey.questions.length}\r\n               </div>\r\n             </CardContent>\r\n           </Card>\r\n          \r\n          <Card style={{marginTop: '1rem'}}>\r\n             <CardHeader>\r\n               <h2>Survey Info</h2>\r\n             </CardHeader>\r\n             <CardContent>\r\n               <div style={{display: 'flex', flexDirection: 'column', gap: '0.8rem'}}>\r\n                 <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                   <span style={{color: '#64748b'}}>Total Questions:</span>\r\n                   <span style={{fontWeight: '500'}}>{survey.questions.length}</span>\r\n                 </div>\r\n                 <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                   <span style={{color: '#64748b'}}>Current:</span>\r\n                   <span style={{fontWeight: '500'}}>{currentQuestion + 1}</span>\r\n                 </div>\r\n                 <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                   <span style={{color: '#64748b'}}>Answered:</span>\r\n                   <span style={{fontWeight: '500'}}>{Object.keys(responses).length}</span>\r\n                 </div>\r\n                 <div style={{display: 'flex', justifyContent: 'space-between'}}>\r\n                   <span style={{color: '#64748b'}}>Required:</span>\r\n                   <span style={{fontWeight: '500', color: getRequiredQuestionsStatus().completed === getRequiredQuestionsStatus().total ? '#059669' : '#e74c3c'}}>\r\n                     {getRequiredQuestionsStatus().completed}/{getRequiredQuestionsStatus().total}\r\n                   </span>\r\n                 </div>\r\n                 {!validateAllRequiredQuestions() && (\r\n                   <div style={{padding: '0.5rem', background: '#fef2f2', border: '1px solid #fecaca', borderRadius: '4px', fontSize: '0.8rem', color: '#dc2626'}}>\r\n                     Please complete all required questions to submit\r\n                   </div>\r\n                 )}\r\n               </div>\r\n             </CardContent>\r\n           </Card>\r\n        </div>\r\n      </ContentGrid>\r\n    </SurveyContainer>\r\n  );\r\n};\r\n\r\nexport default SurveyDetail;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,WAAW,KAAQ,OAAO,CAC/D,OAASC,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,OAASC,WAAW,CAAEC,aAAa,CAAEC,qBAAqB,KAAQ,gBAAgB,CAClF,OAASC,KAAK,CAAEC,KAAK,CAAEC,UAAU,CAAEC,WAAW,CAAEC,YAAY,KAAQ,cAAc,CAClF,OAASC,OAAO,KAAQ,yBAAyB,CACjD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,mBAAmB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEvC,KAAM,CAAAC,eAAe,CAAGL,MAAM,CAACM,GAAG;AAClC;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGP,MAAM,CAACQ,MAAM;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,UAAU,CAAGT,MAAM,CAACM,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAI,YAAY,CAAGV,MAAM,CAACM,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAK,UAAU,CAAGX,MAAM,CAACM,GAAG;AAC7B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAM,QAAQ,CAAGZ,MAAM,CAACM,GAAG;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAO,WAAW,CAAGb,MAAM,CAACM,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAQ,IAAI,CAAGd,MAAM,CAACM,GAAG;AACvB;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAS,UAAU,CAAGf,MAAM,CAACM,GAAG;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAU,WAAW,CAAGhB,MAAM,CAACM,GAAG;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAID,KAAM,CAAAW,YAAY,CAAGjB,MAAM,CAACM,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAY,gBAAgB,CAAGlB,MAAM,CAACM,GAAG;AACnC;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAa,WAAW,CAAGnB,MAAM,CAACoB,KAAK;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,SAAS,CAAGrB,MAAM,CAACsB,KAAK;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,QAAQ,CAAGvB,MAAM,CAACwB,QAAQ;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAC,iBAAiB,CAAGzB,MAAM,CAACM,GAAG;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAoB,cAAc,CAAG1B,MAAM,CAACM,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAqB,YAAY,CAAG3B,MAAM,CAACM,GAAG;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAsB,cAAc,CAAG5B,MAAM,CAACM,GAAG;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}